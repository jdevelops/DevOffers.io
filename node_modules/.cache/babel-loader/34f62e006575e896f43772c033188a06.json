{"ast":null,"code":"import _regeneratorRuntime from\"C:/Frontend22/Projects/inz/DevOffers.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Frontend22/Projects/inz/DevOffers.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Frontend22/Projects/inz/DevOffers.io/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Frontend22/Projects/inz/DevOffers.io/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Frontend22/Projects/inz/DevOffers.io/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import supabase from\"../config/supabaseClient\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(_ref){var setToken=_ref.setToken;var navigate=useNavigate();var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];// Dunckja obsługująca formularz\nfunction handleChange(event){setFormData(function(prevFormData){return _objectSpread(_objectSpread({},prevFormData),{},_defineProperty({},event.target.name,event.target.value));});}// submit formularz\nfunction handleSubmit(_x){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){var _yield$supabase$auth$,data,error;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return supabase.auth.signInWithPassword({email:formData.email,password:formData.password});case 4:_yield$supabase$auth$=_context.sent;data=_yield$supabase$auth$.data;error=_yield$supabase$auth$.error;if(!error){_context.next=9;break;}throw error;case 9:console.log(data);setToken(data);navigate(\"/homepage\");_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](1);alert(_context.t0);case 17:case\"end\":return _context.stop();}}},_callee,null,[[1,14]]);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"login__title\",children:\"Zaloguj si\\u0119\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"login_form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Email\",name:\"email\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Has\\u0142o\",name:\"password\",type:\"password\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Zaloguj si\\u0119\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"login_footer\",children:/*#__PURE__*/_jsxs(\"span\",{children:[\"Nie masz jeszcze konta ? \",/*#__PURE__*/_jsx(Link,{to:\"/signup\",children:\"Zajerejstruj si\\u0119 \"})]})})]});};export default Login;","map":{"version":3,"names":["React","useState","Link","useNavigate","supabase","Login","setToken","navigate","email","password","formData","setFormData","handleChange","event","prevFormData","target","name","value","handleSubmit","e","preventDefault","auth","signInWithPassword","data","error","console","log","alert"],"sources":["C:/Frontend22/Projects/inz/DevOffers.io/src/pages/Login.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport supabase from \"../config/supabaseClient\";\r\n\r\nconst Login = ({ setToken }) => {\r\n  let navigate = useNavigate();\r\n\r\n  const [formData, setFormData] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  // Dunckja obsługująca formularz\r\n  function handleChange(event) {\r\n    setFormData((prevFormData) => {\r\n      return {\r\n        ...prevFormData,\r\n        [event.target.name]: event.target.value,\r\n      };\r\n    });\r\n  }\r\n  // submit formularz\r\n  async function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const { data, error } = await supabase.auth.signInWithPassword({\r\n        email: formData.email,\r\n        password: formData.password,\r\n      });\r\n\r\n      if (error) throw error;\r\n      console.log(data);\r\n      setToken(data);\r\n      navigate(\"/homepage\");\r\n    } catch (error) {\r\n      alert(error);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"page\">\r\n      <h1 className=\"login__title\">Zaloguj się</h1>\r\n      <form className=\"login_form\" onSubmit={handleSubmit}>\r\n        <input placeholder=\"Email\" name=\"email\" onChange={handleChange} />\r\n\r\n        <input\r\n          placeholder=\"Hasło\"\r\n          name=\"password\"\r\n          type=\"password\"\r\n          onChange={handleChange}\r\n        />\r\n\r\n        <button type=\"submit\">Zaloguj się</button>\r\n      </form>\r\n      <div className=\"login_footer\">\r\n        <span>\r\n          Nie masz jeszcze konta ? <Link to=\"/signup\">Zajerejstruj się </Link>\r\n        </span>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"],"mappings":"koBAAA,MAAOA,MAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CACA,MAAOC,SAAP,KAAqB,0BAArB,C,wFAEA,GAAMC,MAAK,CAAG,QAARA,MAAQ,MAAkB,IAAfC,SAAe,MAAfA,QAAe,CAC9B,GAAIC,SAAQ,CAAGJ,WAAW,EAA1B,CAEA,cAAgCF,QAAQ,CAAC,CACvCO,KAAK,CAAE,EADgC,CAEvCC,QAAQ,CAAE,EAF6B,CAAD,CAAxC,wCAAOC,QAAP,eAAiBC,WAAjB,eAKA;AACA,QAASC,aAAT,CAAsBC,KAAtB,CAA6B,CAC3BF,WAAW,CAAC,SAACG,YAAD,CAAkB,CAC5B,sCACKA,YADL,wBAEGD,KAAK,CAACE,MAAN,CAAaC,IAFhB,CAEuBH,KAAK,CAACE,MAAN,CAAaE,KAFpC,GAID,CALU,CAAX,CAMD,CACD;AAjB8B,QAkBfC,aAlBe,kJAkB9B,iBAA4BC,CAA5B,yJACEA,CAAC,CAACC,cAAF,GADF,sCAIkChB,SAAQ,CAACiB,IAAT,CAAcC,kBAAd,CAAiC,CAC7Dd,KAAK,CAAEE,QAAQ,CAACF,KAD6C,CAE7DC,QAAQ,CAAEC,QAAQ,CAACD,QAF0C,CAAjC,CAJlC,4CAIYc,IAJZ,uBAIYA,IAJZ,CAIkBC,KAJlB,uBAIkBA,KAJlB,KASQA,KATR,8BASqBA,MATrB,QAUIC,OAAO,CAACC,GAAR,CAAYH,IAAZ,EACAjB,QAAQ,CAACiB,IAAD,CAAR,CACAhB,QAAQ,CAAC,WAAD,CAAR,CAZJ,iFAcIoB,KAAK,aAAL,CAdJ,qEAlB8B,+CAoC9B,mBACE,aAAK,SAAS,CAAC,MAAf,wBACE,WAAI,SAAS,CAAC,cAAd,8BADF,cAEE,cAAM,SAAS,CAAC,YAAhB,CAA6B,QAAQ,CAAET,YAAvC,wBACE,cAAO,WAAW,CAAC,OAAnB,CAA2B,IAAI,CAAC,OAAhC,CAAwC,QAAQ,CAAEN,YAAlD,EADF,cAGE,cACE,WAAW,CAAC,YADd,CAEE,IAAI,CAAC,UAFP,CAGE,IAAI,CAAC,UAHP,CAIE,QAAQ,CAAEA,YAJZ,EAHF,cAUE,eAAQ,IAAI,CAAC,QAAb,8BAVF,GAFF,cAcE,YAAK,SAAS,CAAC,cAAf,uBACE,iEAC2B,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,oCAD3B,GADF,EAdF,GADF,CAsBD,CA1DD,CA4DA,cAAeP,MAAf"},"metadata":{},"sourceType":"module"}