{"ast":null,"code":"import _regeneratorRuntime from\"C:/Frontend22/Projects/inz/DevOffers.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Frontend22/Projects/inz/DevOffers.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Frontend22/Projects/inz/DevOffers.io/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useParams,useNavigate}from\"react-router-dom\";// pozwala na użycie Hooka useParam\nimport{useEffect,useState}from\"react\";import supabase from\"../config/supabaseClient\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Offer=function Offer(){var _useParams=useParams(),id=_useParams.id;// na podstawie routingu z app.js przyjmujemy paratmetr id który możemy użyć w obecnym komponencie jako obiekt\nvar navigate=useNavigate();//Funkcja wywołana podczas załądowania componentu ma\nvar _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),company_name=_useState4[0],setCompany_Name=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),location=_useState6[0],setLocation=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),description=_useState8[0],setMethod=_useState8[1];// potencjalnie zmienić na recepie\nvar _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),url=_useState10[0],setUrl=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),data=_useState12[0],setData=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),salary_low=_useState14[0],setSalaryLow=_useState14[1];var _useState15=useState(10),_useState16=_slicedToArray(_useState15,2),salary_top=_useState16[0],setSalaryTop=_useState16[1];var _useState17=useState(\"Mid\"),_useState18=_slicedToArray(_useState17,2),position_level=_useState18[0],setPosition_Level=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),category_logo=_useState20[0],setCategoryLogo=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),fromError=_useState22[0],setFormError=_useState22[1];var redirectFoo=function redirectFoo(){window.open(url,\"_blank\");};//Inicjalizacja daty\nvar time=new Date();// FUNKCJA OBLICZAJĄCA CZAS OD DODANIA { KALKULACJA W MINUTACH}\nfunction timeCalc(){var createdTime=parseInt(data.slice(0,4))*8760+parseInt(data.slice(5,7))*720+parseInt(data.slice(8,10))*24;var currentTime=time.getFullYear()*8760+(time.getMonth()+1)*720+time.getDate()*24;//funkcja zwraca skonfigurowanego strniga\nvar timeDif=currentTime-createdTime;var outputValue;if(timeDif<=48){outputValue=\"NOWE\";}else if(timeDif>48){outputValue=\"DODANO \"+timeDif/24+\" DNI TEMU\";}else{outputValue=\"error\";}return outputValue;}useEffect(function(){window.scrollTo(0,0);var fetchOffers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$supabase$from$,data,error;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return supabase.from(\"offers\")// pobranie z tabeli\n.select()// zwracanie daty\n.eq(\"id\",id)//linijka odpowiedzialna za filtrowanie zwraca jeżeli kolumna \"id\" jest równa zmiennej id\n.single();case 2:_yield$supabase$from$=_context.sent;data=_yield$supabase$from$.data;error=_yield$supabase$from$.error;if(error){navigate(\"/\",{replace:true});// replace true zamienia ostatnia strone w histori na strone główną\n}if(data){setTitle(data.title);setMethod(data.description);setUrl(data.link_url);setCompany_Name(data.company_name);setSalaryLow(data.salary_low);setSalaryTop(data.salary_top);setLocation(data.location);setPosition_Level(data.position_level);setCategoryLogo(data.category_logo);setData(data.created_at);//console.log(data);\n}/* MOZE ZOSTANIE UŻYTE\r\n      function helperFoo(d, e) {\r\n        if (d !== null) {\r\n          console.log(d, e);\r\n          console.log(\"data is not null\");\r\n        } else if (e !== null) {\r\n          console.log(d, e);\r\n          console.log(\"error is not null\");\r\n          navigate(\"/\", { replace: true });\r\n        } else {\r\n          console.log(d, e);\r\n          console.log(\"idk what happend\");\r\n        }\r\n      }\r\n      helperFoo(data, error);\r\n      */case 7:case\"end\":return _context.stop();}}},_callee);}));return function fetchOffers(){return _ref.apply(this,arguments);};}();fetchOffers();// invoke funkcji na koniec parsowaniaHooka\n},[id,navigate]);return/*#__PURE__*/_jsxs(\"div\",{className:\"page offer-view\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"offer-view_wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"offer-view_header\",children:/*#__PURE__*/_jsx(\"h2\",{children:title.toUpperCase()})}),/*#__PURE__*/_jsxs(\"div\",{className:\"offer-view_topsection\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"offer_main-company\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"material-icons offer-icon\",children:\"business\"}),company_name.toUpperCase()]}),/*#__PURE__*/_jsxs(\"p\",{className:\"offer_main-location\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"material-icons offer-icon\",children:\"place\"}),location.toUpperCase()]}),/*#__PURE__*/_jsxs(\"p\",{className:\"offer-view_level\",children:[\"Poziom: \",position_level]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"offer-view_time\",children:timeCalc()}),/*#__PURE__*/_jsxs(\"p\",{className:\"offer-view_salary\",children:[salary_low,\" - \",salary_top,\" PLN\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"offer-view_wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"offer-view_header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"OPIS STANOWISKA\"})}),/*#__PURE__*/_jsx(\"pre\",{children:/*#__PURE__*/_jsx(\"p\",{children:description})}),/*#__PURE__*/_jsx(\"div\",{className:\"break\"}),/*#__PURE__*/_jsx(\"button\",{className:\"update_btn\",onClick:redirectFoo,children:\"APLIKUJ\"})]})]});};export default Offer;","map":{"version":3,"names":["useParams","useNavigate","useEffect","useState","supabase","Offer","id","navigate","title","setTitle","company_name","setCompany_Name","location","setLocation","description","setMethod","url","setUrl","data","setData","salary_low","setSalaryLow","salary_top","setSalaryTop","position_level","setPosition_Level","category_logo","setCategoryLogo","fromError","setFormError","redirectFoo","window","open","time","Date","timeCalc","createdTime","parseInt","slice","currentTime","getFullYear","getMonth","getDate","timeDif","outputValue","scrollTo","fetchOffers","from","select","eq","single","error","replace","link_url","created_at","toUpperCase"],"sources":["C:/Frontend22/Projects/inz/DevOffers.io/src/pages/Offer.js"],"sourcesContent":["import { useParams, useNavigate } from \"react-router-dom\"; // pozwala na użycie Hooka useParam\r\nimport { useEffect, useState } from \"react\";\r\nimport supabase from \"../config/supabaseClient\";\r\n\r\nconst Offer = () => {\r\n  const { id } = useParams(); // na podstawie routingu z app.js przyjmujemy paratmetr id który możemy użyć w obecnym komponencie jako obiekt\r\n  const navigate = useNavigate();\r\n  //Funkcja wywołana podczas załądowania componentu ma\r\n  const [title, setTitle] = useState(\"\");\r\n  const [company_name, setCompany_Name] = useState(\"\");\r\n  const [location, setLocation] = useState(\"\");\r\n  const [description, setMethod] = useState(\"\"); // potencjalnie zmienić na recepie\r\n  const [url, setUrl] = useState(\"\");\r\n  const [data, setData] = useState(\"\");\r\n  const [salary_low, setSalaryLow] = useState(0);\r\n  const [salary_top, setSalaryTop] = useState(10);\r\n  const [position_level, setPosition_Level] = useState(\"Mid\");\r\n  const [category_logo, setCategoryLogo] = useState(\"\");\r\n  const [fromError, setFormError] = useState(null);\r\n\r\n  const redirectFoo = () => {\r\n    window.open(url, \"_blank\");\r\n  };\r\n\r\n  //Inicjalizacja daty\r\n  const time = new Date();\r\n  // FUNKCJA OBLICZAJĄCA CZAS OD DODANIA { KALKULACJA W MINUTACH}\r\n  function timeCalc() {\r\n    let createdTime =\r\n      parseInt(data.slice(0, 4)) * 8760 +\r\n      parseInt(data.slice(5, 7)) * 720 +\r\n      parseInt(data.slice(8, 10)) * 24;\r\n    let currentTime =\r\n      time.getFullYear() * 8760 +\r\n      (time.getMonth() + 1) * 720 +\r\n      time.getDate() * 24;\r\n    //funkcja zwraca skonfigurowanego strniga\r\n    let timeDif = currentTime - createdTime;\r\n    let outputValue;\r\n\r\n    if (timeDif <= 48) {\r\n      outputValue = \"NOWE\";\r\n    } else if (timeDif > 48) {\r\n      outputValue = \"DODANO \" + timeDif / 24 + \" DNI TEMU\";\r\n    } else {\r\n      outputValue = \"error\";\r\n    }\r\n    return outputValue;\r\n  }\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n    const fetchOffers = async () => {\r\n      const { data, error } = await supabase\r\n        .from(\"offers\") // pobranie z tabeli\r\n        .select() // zwracanie daty\r\n        .eq(\"id\", id) //linijka odpowiedzialna za filtrowanie zwraca jeżeli kolumna \"id\" jest równa zmiennej id\r\n        .single();\r\n\r\n      if (error) {\r\n        navigate(\"/\", { replace: true }); // replace true zamienia ostatnia strone w histori na strone główną\r\n      }\r\n      if (data) {\r\n        setTitle(data.title);\r\n        setMethod(data.description);\r\n        setUrl(data.link_url);\r\n        setCompany_Name(data.company_name);\r\n        setSalaryLow(data.salary_low);\r\n        setSalaryTop(data.salary_top);\r\n        setLocation(data.location);\r\n        setPosition_Level(data.position_level);\r\n        setCategoryLogo(data.category_logo);\r\n        setData(data.created_at);\r\n        //console.log(data);\r\n      }\r\n      /* MOZE ZOSTANIE UŻYTE\r\n      function helperFoo(d, e) {\r\n        if (d !== null) {\r\n          console.log(d, e);\r\n          console.log(\"data is not null\");\r\n        } else if (e !== null) {\r\n          console.log(d, e);\r\n          console.log(\"error is not null\");\r\n          navigate(\"/\", { replace: true });\r\n        } else {\r\n          console.log(d, e);\r\n          console.log(\"idk what happend\");\r\n        }\r\n      }\r\n      helperFoo(data, error);\r\n      */\r\n    };\r\n    fetchOffers(); // invoke funkcji na koniec parsowaniaHooka\r\n  }, [id, navigate]);\r\n\r\n  return (\r\n    <div className=\"page offer-view\">\r\n      <div className=\"offer-view_wrapper\">\r\n        <div className=\"offer-view_header\">\r\n          <h2>{title.toUpperCase()}</h2>\r\n        </div>\r\n        <div className=\"offer-view_topsection\">\r\n          <div>\r\n            {/*Style pożyczone z card */}\r\n            <p className=\"offer_main-company\">\r\n              <i className=\"material-icons offer-icon\">business</i>\r\n              {company_name.toUpperCase()}\r\n            </p>\r\n            <p className=\"offer_main-location\">\r\n              <i className=\"material-icons offer-icon\">place</i>\r\n              {location.toUpperCase()}\r\n            </p>\r\n            <p className=\"offer-view_level\">Poziom: {position_level}</p>\r\n          </div>\r\n          <div>\r\n            <p className=\"offer-view_time\">{timeCalc()}</p>\r\n            <p className=\"offer-view_salary\">\r\n              {salary_low} - {salary_top} PLN\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"offer-view_wrapper\">\r\n        <div className=\"offer-view_header\">\r\n          <h2>OPIS STANOWISKA</h2>\r\n        </div>\r\n        <pre>\r\n          <p>{description}</p>\r\n        </pre>\r\n        <div className=\"break\"></div>\r\n        <button className=\"update_btn\" onClick={redirectFoo}>\r\n          APLIKUJ\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Offer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}