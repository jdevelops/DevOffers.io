{"ast":null,"code":"import _regeneratorRuntime from\"C:/Frontend22/Projects/inz/DevOffers.io/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Frontend22/Projects/inz/DevOffers.io/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Frontend22/Projects/inz/DevOffers.io/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useNavigate}from\"react-router-dom\";import supabase from\"../config/supabaseClient\";import{Link}from\"react-router-dom\";import{useEffect,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Homepage=function Homepage(_ref){var token=_ref.token;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),createDate=_useState2[0],setCreateDate=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var navigate=useNavigate();var profilInfo=function profilInfo(){setCreateDate(token.user.created_at.substring(0,10));var emailArr=token.user.email.split(\"\");for(var i=0;i<5;i++){emailArr[i+3]=\"*\";}var x=emailArr.join(\"\");setEmail(x);};//funkcja sprawdzajaca id przy ponownym fetchu\nfunction checkID(){return _checkID.apply(this,arguments);}//funkcja logout\nfunction _checkID(){_checkID=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$supabase$auth$,user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return supabase.auth.getUser();case 2:_yield$supabase$auth$=_context.sent;user=_yield$supabase$auth$.data.user;case 4:case\"end\":return _context.stop();}}},_callee);}));return _checkID.apply(this,arguments);}function handleLogout(){sessionStorage.removeItem(\"token\");supabase.auth.signOut();token=false;localStorage.clear();navigate(\"/\",{token:token});window.location.reload(true);}useEffect(function(){profilInfo();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"login__title\",children:\"Profil\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile_card\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"profile_img\",src:\"https://lzjwjilirbqiypntnadj.supabase.co/storage/v1/object/public/logos/user.webp\",alt:\"profile_picture\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Witaj, \",token.user.user_metadata.full_name]}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Profil utworzono: \",createDate]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Adres mailowy: \",email]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile_footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"hidden\",onClick:checkID,children:\"Check uuid\"}),/*#__PURE__*/_jsx(Link,{to:\"/CreatedOffers\",children:\"Twoje oferty\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Wyloguj si\\u0119\"})]})]})]});};export default Homepage;","map":{"version":3,"names":["React","useNavigate","supabase","Link","useEffect","useState","Homepage","token","createDate","setCreateDate","email","setEmail","navigate","profilInfo","user","created_at","substring","emailArr","split","i","x","join","checkID","auth","getUser","data","handleLogout","sessionStorage","removeItem","signOut","localStorage","clear","window","location","reload","user_metadata","full_name"],"sources":["C:/Frontend22/Projects/inz/DevOffers.io/src/pages/Homepage.js"],"sourcesContent":["import React from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport supabase from \"../config/supabaseClient\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nconst Homepage = ({ token }) => {\r\n  const [createDate, setCreateDate] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  let navigate = useNavigate();\r\n\r\n  const profilInfo = () => {\r\n    setCreateDate(token.user.created_at.substring(0, 10));\r\n    let emailArr = token.user.email.split(\"\");\r\n    for (let i = 0; i < 5; i++) {\r\n      emailArr[i + 3] = \"*\";\r\n    }\r\n    let x = emailArr.join(\"\");\r\n    setEmail(x);\r\n  };\r\n  //funkcja sprawdzajaca id przy ponownym fetchu\r\n  async function checkID() {\r\n    const {\r\n      data: { user },\r\n    } = await supabase.auth.getUser();\r\n    //console.log(user);\r\n  }\r\n\r\n  //funkcja logout\r\n  function handleLogout() {\r\n    sessionStorage.removeItem(\"token\");\r\n    supabase.auth.signOut();\r\n    token = false;\r\n    localStorage.clear();\r\n    navigate(\"/\", { token });\r\n    window.location.reload(true);\r\n  }\r\n\r\n  useEffect(() => {\r\n    profilInfo();\r\n  }, []);\r\n  return (\r\n    <div className=\"page\">\r\n      <h1 className=\"login__title\">Profil</h1>\r\n      <div className=\"profile_card\">\r\n        <img\r\n          className=\"profile_img\"\r\n          src=\"https://lzjwjilirbqiypntnadj.supabase.co/storage/v1/object/public/logos/user.webp\"\r\n          alt=\"profile_picture\"\r\n        />\r\n        <h3>Witaj, {token.user.user_metadata.full_name}</h3>\r\n        <ul>\r\n          <li>Profil utworzono: {createDate}</li>\r\n          <li>Adres mailowy: {email}</li>\r\n        </ul>\r\n        <div className=\"profile_footer\">\r\n          <button className=\"hidden\" onClick={checkID}>\r\n            Check uuid\r\n          </button>\r\n          <Link to=\"/CreatedOffers\">Twoje oferty</Link>\r\n\r\n          <button onClick={handleLogout}>Wyloguj siÄ™</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Homepage;\r\n"],"mappings":"uYAAA,MAAOA,MAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,kBAA5B,CACA,MAAOC,SAAP,KAAqB,0BAArB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,C,wFAEA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,MAAe,IAAZC,MAAY,MAAZA,KAAY,CAC9B,cAAoCF,QAAQ,CAAC,EAAD,CAA5C,wCAAOG,UAAP,eAAmBC,aAAnB,eACA,eAA0BJ,QAAQ,CAAC,EAAD,CAAlC,yCAAOK,KAAP,eAAcC,QAAd,eACA,GAAIC,SAAQ,CAAGX,WAAW,EAA1B,CAEA,GAAMY,WAAU,CAAG,QAAbA,WAAa,EAAM,CACvBJ,aAAa,CAACF,KAAK,CAACO,IAAN,CAAWC,UAAX,CAAsBC,SAAtB,CAAgC,CAAhC,CAAmC,EAAnC,CAAD,CAAb,CACA,GAAIC,SAAQ,CAAGV,KAAK,CAACO,IAAN,CAAWJ,KAAX,CAAiBQ,KAAjB,CAAuB,EAAvB,CAAf,CACA,IAAK,GAAIC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,CAApB,CAAuBA,CAAC,EAAxB,CAA4B,CAC1BF,QAAQ,CAACE,CAAC,CAAG,CAAL,CAAR,CAAkB,GAAlB,CACD,CACD,GAAIC,EAAC,CAAGH,QAAQ,CAACI,IAAT,CAAc,EAAd,CAAR,CACAV,QAAQ,CAACS,CAAD,CAAR,CACD,CARD,CASA;AAd8B,QAefE,QAfe,0CAsB9B;AAtB8B,uFAe9B,0LAGYpB,SAAQ,CAACqB,IAAT,CAAcC,OAAd,EAHZ,4CAEYV,IAFZ,uBAEIW,IAFJ,CAEYX,IAFZ,uDAf8B,0CAuB9B,QAASY,aAAT,EAAwB,CACtBC,cAAc,CAACC,UAAf,CAA0B,OAA1B,EACA1B,QAAQ,CAACqB,IAAT,CAAcM,OAAd,GACAtB,KAAK,CAAG,KAAR,CACAuB,YAAY,CAACC,KAAb,GACAnB,QAAQ,CAAC,GAAD,CAAM,CAAEL,KAAK,CAALA,KAAF,CAAN,CAAR,CACAyB,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,IAAvB,EACD,CAED9B,SAAS,CAAC,UAAM,CACdS,UAAU,GACX,CAFQ,CAEN,EAFM,CAAT,CAGA,mBACE,aAAK,SAAS,CAAC,MAAf,wBACE,WAAI,SAAS,CAAC,cAAd,oBADF,cAEE,aAAK,SAAS,CAAC,cAAf,wBACE,YACE,SAAS,CAAC,aADZ,CAEE,GAAG,CAAC,mFAFN,CAGE,GAAG,CAAC,iBAHN,EADF,cAME,gCAAYN,KAAK,CAACO,IAAN,CAAWqB,aAAX,CAAyBC,SAArC,GANF,cAOE,mCACE,2CAAuB5B,UAAvB,GADF,cAEE,wCAAoBE,KAApB,GAFF,GAPF,cAWE,aAAK,SAAS,CAAC,gBAAf,wBACE,eAAQ,SAAS,CAAC,QAAlB,CAA2B,OAAO,CAAEY,OAApC,wBADF,cAIE,KAAC,IAAD,EAAM,EAAE,CAAC,gBAAT,0BAJF,cAME,eAAQ,OAAO,CAAEI,YAAjB,8BANF,GAXF,GAFF,GADF,CAyBD,CA5DD,CA8DA,cAAepB,SAAf"},"metadata":{},"sourceType":"module"}